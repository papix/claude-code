# Update Claude configuration files (CLAUDE.md)

## 概要
Claude Codeの設定ファイル（CLAUDE.md）を更新・管理します。グローバル設定とプロジェクト固有設定の両方に対応します。

## 使用方法
```
/claude-config <更新内容の説明>
```

## 対象ファイル
1. **~/.claude/CLAUDE.md** - グローバル設定（全プロジェクト共通）
2. **./CLAUDE.md** - プロジェクト設定（リポジトリにコミット）
3. **./CLAUDE.local.md** - ローカル設定（.gitignoreに含める）

## 実行内容
1. **現在の設定確認**
   - 3つの設定ファイルの存在確認
   - 各ファイルの現在の内容を確認

2. **更新箇所の特定**
   - 指示内容から更新すべきファイルを判断
   - 更新内容の妥当性を確認

3. **設定の更新**
   - 適切なファイルに設定を追加・修正
   - 既存の設定との整合性を保つ

4. **更新結果の報告**
   - 変更内容の要約
   - 影響範囲の説明

## 出力形式
```
## ⚙️ Claude設定更新結果

### 更新したファイル
1. ~/.claude/CLAUDE.md
   - ✅ コードレビューガイドセクションを追加
   - ✅ 自動コミット設定を更新

2. ./CLAUDE.md  
   - ✅ プロジェクト固有のリンター設定を追加

### 更新内容の詳細
[具体的な変更内容をdiff形式で表示]

### 注意事項
- グローバル設定の変更は全プロジェクトに影響します
- ローカル設定はgitにコミットされません
```

## 設定項目の例
### グローバル設定（~/.claude/CLAUDE.md）
- 言語設定（日本語/英語）
- コーディング規約
- Git コミット規約
- コードレビューガイド
- タスク管理方針

### プロジェクト設定（./CLAUDE.md）
- プロジェクト固有のコマンド
- 開発環境の説明
- ビルド・テストコマンド
- デプロイ手順

### ローカル設定（./CLAUDE.local.md）
- 個人的なメモ
- ローカル環境のパス
- 認証情報（記載は推奨しない）

## よくある使用シーン

### プロジェクト開始時
```bash
# プロジェクト固有の設定を追加
/claude-config ビルドコマンドとテスト手順を追加

# グローバル設定の更新
/claude-config コーディング規約を更新
```

### 開発中の設定調整
```bash
# 新しいリンタールールを追加
/claude-config ESLintの新しいルールを追加

# Gitコミット規約の変更
/claude-config conventional commitsを採用
```

### チーム開発での活用
```bash
# コードレビューガイドライン追加
/claude-config コードレビュー時のチェックポイントを追加

# ローカル設定の作成
/claude-config ローカル開発環境のDB接続情報を追加
```

## 関連コマンド

- `/claude-learnings` - 開発中に得た知見を自動抽出して設定に反映
- `/task` - 設定変更後のタスク実行
- `/code-review` - 更新した設定に基づいたレビュー

## エラーハンドリング

- **設定ファイルが存在しない場合**: 新規作成を提案
- **権限エラー**: ファイルの権限を確認して対処法を提示
- **不正なフォーマット**: 正しいフォーマットの例を提示

## 注意事項
- **優先順位**: ローカル設定 > プロジェクト設定 > グローバル設定
- **機密情報**: 認証情報やAPIキーは設定ファイルに含めない
- **バージョン管理**: CLAUDE.mdは必ずリポジトリにコミット、CLAUDE.local.mdは.gitignoreに追加