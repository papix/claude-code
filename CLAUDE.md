# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## プロジェクト概要
このリポジトリは、Claude Code の設定ファイルと拡張コマンドを管理するためのプロジェクトです。`~/.claude/` ディレクトリの内容をGit管理下に置き、複数環境での設定共有を可能にします。

## リポジトリ構造
- `commands/` - Claude Code のカスタムコマンド（`/task`, `/code-review` など）
- `docs/commands.md` - カスタムコマンドの一覧と使い分けガイド
- `CLAUDE.global.md` - グローバル設定ファイル（`~/.claude/CLAUDE.md` のマスター）
- `setup.sh` - シンボリックリンクを設定するスクリプト

## セットアップ方法
```bash
# リポジトリをクローン後、セットアップスクリプトを実行
./setup.sh
```

このスクリプトは以下を実行します：
1. `~/.claude/commands` → `{repo}/commands/` へのシンボリックリンク作成
2. `~/.claude/CLAUDE.md` → `{repo}/CLAUDE.global.md` へのシンボリックリンク作成

## よく使うコマンド

### セットアップとメンテナンス
```bash
# 初期セットアップ（シンボリックリンクの作成）
./setup.sh

# 変更を取り込む（他の環境で作業後）
git pull
```

### 開発フロー
```bash
# 新しいコマンドをテスト
# Claude Code内で直接 /command-name を使用して動作確認

# コマンド一覧の確認
cat docs/commands.md
```

## 開発時の注意事項

### 新しいコマンドの追加
1. `commands/` ディレクトリに新しい `.md` ファイルを作成
2. コマンドのドキュメント規約に従って記述（h1は英語、本文は日本語）
3. `docs/commands.md` にコマンドの説明を追加
4. 変更をコミット（他の環境では `git pull` 後すぐに利用可能）

### グローバル設定の更新
- `CLAUDE.global.md` を編集（自動的に全環境に反映）
- プロジェクト固有の設定はこのファイル（`CLAUDE.md`）に記載

### コミット時の確認事項
- 新しいコマンドファイルの実行権限は不要（Markdownファイルのため）
- センシティブな情報（APIキー、個人情報など）が含まれていないことを確認

## ドキュメントスタイルガイド

### コマンドドキュメントの記述規約

#### 言語の使い分け
- **h1タイトル（#）**: 英語で記述（コマンドの概要を含む）
- **本文**: 日本語で記述
- **コマンド例**: 実際のコマンドは英語、説明は日本語
- **コードコメント**: 日本語で記述

#### 必須セクション
すべてのコマンドドキュメントには以下のセクションを含めること：

1. **概要** - コマンドの目的と機能の簡潔な説明
2. **使用方法** - コマンドの基本的な使い方
3. **よくある使用シーン** - 具体的な使用例（bashコード例付き）
4. **関連コマンド** - 関連する他のコマンドへの参照
5. **注意事項** - 重要な制約や警告事項

#### 記述例
```markdown
# [English Command Name] - [Brief English Description]

## 概要
[日本語でコマンドの詳細な説明]

## 使用方法
```
/command-name [options]
```

## よくある使用シーン

### [使用シーンのタイトル]
```bash
# 使用例の説明（日本語）
/command-name --option value
```

## 関連コマンド
- `/related-command` - 関連コマンドの説明

## 注意事項
- 重要な注意点を箇条書きで記載
```

## アーキテクチャと設計思想

### シンボリックリンク構造
このプロジェクトは、Claude Codeの設定を集中管理するため、シンボリックリンクを活用しています：

```
~/.claude/
├── commands -> {このリポジトリ}/commands/
└── CLAUDE.md -> {このリポジトリ}/CLAUDE.global.md
```

これにより：
- 複数マシン間での設定同期が `git pull` で完了
- グローバル設定（CLAUDE.global.md）とプロジェクト固有設定（各プロジェクトのCLAUDE.md）の分離
- 新しいコマンドの即時反映（再起動不要）

### コマンドシステムの仕組み
Claude Codeは `~/.claude/commands/` ディレクトリ内の `.md` ファイルを自動的にカスタムコマンドとして認識します。ファイル名がコマンド名となり、`/filename` で呼び出し可能です。